FROM node:22-bookworm

ARG SESSION_SECRET
ARG REDIS_URL 
ARG REDIS_PASSWORD
ENV COOKIE_SECRET=3841c3e28fd63c482b870e286785dd0aa8002f7b47aae3f9a8d1bd77559e86ae1c922df7b02197c5749ae21bf3231da2d61a1411f12b0a4c4a2f40dbaebdfbd9
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY --chown=node:node . .
EXPOSE 3000
CMD ["node", "app.js"]